document.addEventListener("DOMContentLoaded",function(){console.log("Post Guardian popup loaded");var e=document.getElementById("status"),t=document.getElementById("userPrompt"),n=document.getElementById("savePrompt"),r=document.getElementById("riskLevel"),a=document.getElementById("riskLevelValue"),o=document.getElementById("analyzeBtn"),s=document.getElementById("result");function u(e){var t="";switch(e){case 1:t="1 - Very Lenient";break;case 2:t="2 - Lenient";break;case 3:t="3 - Balanced";break;case 4:t="4 - Strict";break;case 5:t="5 - Very Strict";break;default:t="".concat(e)}a.textContent=t}e&&(e.textContent="Post Guardian is active!"),chrome.storage.local.get(["userCustomPrompt","riskLevel"],function(e){e.userCustomPrompt&&(t.value=e.userCustomPrompt);var n=parseInt(e.riskLevel||"3",10);r.value=n,u(n)}),r.addEventListener("input",function(e){u(parseInt(e.target.value,10))}),n.addEventListener("click",function(){var n=t.value.trim(),a=parseInt(r.value,10);chrome.storage.local.set({userCustomPrompt:n,riskLevel:a},function(){e.textContent="Configuration saved!",setTimeout(function(){e.textContent="Post Guardian is active!"},2e3)})}),o.addEventListener("click",function(){chrome.runtime.sendMessage({type:"ANALYZE_VIDEO"},function(e){e.success?s.innerText=JSON.stringify(e.analysis,null,2):s.innerText="Error: "+e.error})})});