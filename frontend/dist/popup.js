document.addEventListener("DOMContentLoaded",function(){console.log("Post Guardian popup loaded");var t=document.getElementById("status");t&&(t.textContent="Post Guardian is active!");var e=document.getElementById("userPrompt"),n=document.getElementById("savePrompt");e&&n&&(chrome.storage.local.get(["userCustomPrompt"],function(t){t.userCustomPrompt&&(e.value=t.userCustomPrompt)}),n.addEventListener("click",function(){var n=e.value.trim();chrome.storage.local.set({userCustomPrompt:n},function(){t.textContent="Custom instruction saved!",setTimeout(function(){t.textContent="Post Guardian is active!"},2e3)})})),document.getElementById("analyzeBtn").addEventListener("click",function(){chrome.runtime.sendMessage({type:"ANALYZE_VIDEO"},function(t){t.success?document.getElementById("result").innerText=JSON.stringify(t.analysis,null,2):document.getElementById("result").innerText="Error: "+t.error})})});